{% extends "base.html" %}

{% block content %}

  <section class="contact">
    <form action="{{ url_for('contact') }}"
          method="POST"
          enctype="multipart/form-data"
          class="contact-form">

      <!-- â”€â”€â”€â”€â”€ í¼ ì„¤ëª… & Last update â”€â”€â”€â”€â”€ -->
      <div class="form-note">
        ğŸ“Œ This form is still active.  
        Last update: <strong>2025-08-01</strong><br>
        Youâ€™ll hear back from me very quickly after sending your message.
      </div>

      <h2>Contact Me</h2>

      <label for="name">Name</label>
      <input type="text" id="name" name="name" placeholder="Your Name" required>

      <label for="email">Email</label>
      <input type="email" id="email" name="email" placeholder="you@example.com" required>

      <label for="phone">Phone</label>
      <input
        type="tel"
        id="phone"
        name="phone"
        placeholder=" 1234 5678"
        required
      />

      <label for="company">Company</label>
      <input type="text" id="company" name="company" placeholder="Your Company / Organization">

      <label for="position">Position</label>
      <input type="text" id="position" name="position" placeholder="Your Position">

      <label for="message">Message</label>
      <textarea id="message" name="message" rows="6" placeholder="Write your messageâ€¦" required></textarea>

      <div class="file-input-wrapper">
        <label for="attachment" class="file-input-button">Upload File</label>
        <input type="file" id="attachment" name="attachment" accept=".pdf,.doc,.docx">
        <span id="file-name">No file chosen</span>
      </div>

      <button type="submit">Send Message</button>
    </form>

    <div class="profile-details">
      <h2>Connect with Me</h2>
      <ul class="details-list">
        <li>
          <strong>LinkedIn:</strong>
          <a href="https://www.linkedin.com/in/hae-eun-lee-169baa2b2/" target="_blank">
            Hae Eun Leeâ€™s LinkedIn Profile
          </a>
        </li>
        <li><strong>Email:</strong> haeeunlee2005@gmail.com</li>
        <li><strong>Phone:</strong> +65 82631481</li>
        <li><strong>Location:</strong> Singapore</li>
      </ul>
    </div>
  </section>



  <!-- â”€â”€â”€ í˜ì´ì§€ ë, DOMContentLoaded ì•ˆì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ â”€â”€â”€ -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 1) íŒŒì¼ëª… í‘œì‹œ ë¦¬ìŠ¤ë„ˆ
      const attachment = document.getElementById('attachment');
      const fileNameSpan = document.getElementById('file-name');
      if (attachment && fileNameSpan) {
        attachment.addEventListener('change', function() {
          fileNameSpan.textContent = this.files[0]?.name || 'No file chosen';
        });
      }

      // 2) intl-tel-input ì´ˆê¸°í™” & full number ìë™ ì…ë ¥
      const phoneInput = document.querySelector('#phone');
      if (phoneInput && window.intlTelInput) {
        const iti = window.intlTelInput(phoneInput, {
          initialCountry: 'sg',
          separateDialCode: true,
          autoHideDialCode: false,
          preferredCountries: ['sg','us','kr'],
          utilsScript: 'https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.min.js'
        });

        // 3) í¼ ì œì¶œ ì „, full E.164 ë²ˆí˜¸ë¡œ value êµì²´
        const form = document.querySelector('.contact-form');
        form.addEventListener('submit', function() {
          // iti.getNumber()ê°€ "+65xxxxxxxx" í˜•íƒœë¥¼ ë°˜í™˜
          phoneInput.value = iti.getNumber();
        });
      }
    });

    // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    // 3) IntersectionObserverë¡œ í˜ì´ë“œì¸ ì• ë‹ˆë©”ì´ì…˜
    const elems = document.querySelectorAll('.contact-form, .profile-details');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = 1;
          observer.unobserve(entry.target);  // í•œ ë²ˆë§Œ ì‹¤í–‰í•˜ë ¤ë©´ í•´ì œ
        }
      });
    }, {
      threshold: 0.1  // ìš”ì†Œê°€ 10% ë³´ì´ë©´ ì½œë°±
    });

    elems.forEach(el => {
      // ì´ˆê¸° ìƒíƒœ: íˆ¬ëª…, transition ì„¤ì •
      el.style.opacity = 0;
      el.style.transition = 'opacity 1s ease-in-out';
      observer.observe(el);
    });

  </script>

  
{% endblock %}
